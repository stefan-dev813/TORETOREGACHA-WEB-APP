import{L as h,h as u,K as g,r as _,o,c as i,b as t,F as b,a as m,w as f,g as p,f as c,t as n,n as x,k as v}from"./app.dc8eb5b8.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as y}from"./PlayIcon.3fc1ad8a.js";const k={components:{Link:h,PlayIcon:y},props:{gacha:Object,url_edit:String},data(){return{category_share:u().props.value.category_share,url_card:"",url_10gacha:"",url_1gacha:"",str_gacha10:"",point_10gacha:0}},methods:{get_progress_value(){let e=Math.round(this.gacha.count_rest*100/this.gacha.count_card),s="bg-red-500";return e>33&&(s="bg-yellow-500"),e>66&&(s="bg-green-500"),{value:e,bg_color:s}},format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},getImageClass(e){return"url('"+e+"')"},clickCard(){this.gacha.count_rest>0&&!this.url_edit&&(window.location.href=this.url_card)},click1gacha(){if(!this.url_edit){if(this.gacha.ableCount==0){alert("\u30B5\u30FC\u30D0\u30FC\u304C\u6DF7\u307F\u5408\u3063\u3066\u304A\u308A\u307E\u3059\u3002\u5C11\u3057\u6642\u9593\u3092\u304A\u3044\u3066\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002");return}this.url_1gacha&&(window.location.href=this.url_1gacha)}},click10gacha(){if(!this.url_edit){if(this.gacha.ableCount==0){alert("\u30B5\u30FC\u30D0\u30FC\u304C\u6DF7\u307F\u5408\u3063\u3066\u304A\u308A\u307E\u3059\u3002\u5C11\u3057\u6642\u9593\u3092\u304A\u3044\u3066\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002");return}this.url_10gacha&&(window.location.href=this.url_10gacha)}},destroyGacha(e){confirm("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F")&&g.Inertia.delete(route("admin.gacha.destroy",{id:e}))}},mounted(){this.gacha.count_rest<10?(this.str_gacha10="\u5168\u3066",this.point_10gacha=this.gacha.count_rest*this.gacha.point):(this.str_gacha10="10\u9023",this.point_10gacha=10*this.gacha.point),this.url_edit||(this.url_card=route("user.gacha",this.gacha.id)+this.category_share.cat_route_appendix,this.url_10gacha=route("user.gacha.start",{id:this.gacha.id,number:10}),this.url_1gacha=route("user.gacha.start",{id:this.gacha.id,number:1}))}},C={class:"cursor-pointer border border-4 border-[#60493d] mb-0 relative rounded-[20px] shadow w-full bg-cover overflow-hidden bg-[#60493d]"},z=["src"],G={key:0,class:"absolute z-20 top-0 left-0 items-center px-2 py-1 bg-green-500 border border-transparent rounded-sm font-semibold text-sm text-white tracking-widest"},L={key:1,class:"absolute z-20 top-0 left-0 items-center px-2 py-1 bg-neutral-500 border border-transparent rounded-sm font-semibold text-sm text-white tracking-widest"},N={key:1,class:"absolute bottom-0 w-full h-full bg-opacity-70 z-10 bg-black flex items-center justify-center"},S=t("img",{src:"/images/sold_out.png",class:"w-[75%]"},null,-1),V=[S],j={class:"bottom-0 w-full p-2 rounded-b-[20px]"},B={class:"px-4 text-white"},I={class:"px-1 flex flex-row justify-between mb-1"},P=t("span",{class:"text-sm"},"\u6B8B ",-1),F={class:"font-semibold text-base"},T={class:"text-sm"},D=t("span",{class:"inline-block align-middle pr-2"},[t("img",{class:"h-5",src:"/images/icon_cash.png"})],-1),E={class:"font-semibold"},K=t("span",null,"PT",-1),M={class:"mb-1"},O={class:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700 overflow-hidden"};function q(e,s,a,A,H,r){const l=_("Link");return o(),i("div",C,[t("div",{onClick:s[0]||(s[0]=d=>r.clickCard())},[t("img",{src:a.gacha.thumbnail},null,8,z)]),a.url_edit?(o(),i(b,{key:0},[m(l,{href:a.url_edit,class:"absolute z-20 top-0 right-0 items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-sm font-semibold text-sm text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"},{default:f(()=>[p(" \u7DE8\u96C6\u3059\u308B ")]),_:1},8,["href"]),a.gacha.status==1?(o(),i("div",G," \u516C\u958B ")):(o(),i("div",L," \u975E\u516C\u958B ")),t("button",{onClick:s[1]||(s[1]=d=>r.destroyGacha(a.gacha.id)),class:"z-20 rounded absolute bottom-0 right-0 px-4 py-2 bg-red-500 text-xs text-neutral-50"}," \u524A\u9664 ")],64)):c("",!0),a.gacha.count_rest==0&&!a.url_edit?(o(),i("div",N,V)):c("",!0),t("div",j,[t("div",B,[t("div",I,[t("div",null,[P,t("span",F,n(r.format_number(a.gacha.count_rest)),1),t("span",T,"/"+n(r.format_number(a.gacha.count_card)),1)]),t("div",null,[D,t("span",E,n(r.format_number(a.gacha.point)),1),K])]),t("div",M,[t("div",O,[t("div",{class:x(["h-4 rounded-full",r.get_progress_value().bg_color]),style:v({width:r.get_progress_value().value+"%"})},null,6)])])])])])}const U=w(k,[["render",q]]);export{U as G};
